<!--
Copyright (c) 2020 Nekokatt
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->
<!--
Copyright (c) 2020 Nekokatt
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>hikari.event_stream API documentation</title>
<meta name="description" content="Streamers used for asynchronously iterating through gateway events." />
<meta property="og:title" content="hikari.event_stream module documentation" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://hikari-py.github.io/hikari/logo.png" />
<meta property="og:description" content="A Discord Bot framework for modern Python and asyncio built on good intentions" />
<meta property="theme-color" content="#ff029a" />
<link rel="shortcut icon" type="image/png" href="https://hikari-py.github.io/hikari/logo.png"/>
<!--<script async src="https://cse.google.com/cse.js?cx=017837193012385208679:pey8ky8gdqw"></script>
<style>.gsc-control-cse {padding:0 !important;margin-top:1em}</style>-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css" rel="stylesheet"/>
<style>
* {
scrollbar-color: #202324 #454a4d;
scroll-behavior: smooth;
}
img#logo {
border-radius: 15px;
width: 30px;
height: 30px;
margin-right: 0.5em;
}
small.smaller {
font-size: 0.75em;
}
body {
background-color: #181A1B;
color: #C9C5C0;
}
h1 {
margin-top: 3rem;
}
h2 {
margin-top: 1.75rem;
margin-bottom: 1em;
}
h3 {
margin-top: 1.25rem;
}
h4 {
margin-top: 1rem;
}
.nav-section {
margin-top: 2em;
}
.monospaced {
font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
a.sidebar-nav-pill,
a.sidebar-nav-pill:active,
a.sidebar-nav-pill:hover {
color: #BDB7AF;
}
.module-source > details > pre {
display: block;
overflow-x: auto;
overflow-y: auto;
max-height: 600px;
font-size: 0.8em;
}
a {
color: #DE4F91;
}
a:hover {
color: #64B1F2;
}
.jumbotron {
background-color: #232627;
}
.breadcrumb-item.inactive > a {
color: #d264d0 !important;
}
.breadcrumb-item.active > a {
color: #de4f91 !important;
}
.breadcrumb-item+.breadcrumb-item::before {
content: ".";
}
.module-breadcrumb {
padding-left: 0 !important;
background-color: #232627;
}
ul.nested {
margin-left: 1em;
}
h2#parameters::after {
margin-left: 2em;
}
dt {
margin-left: 2em;
}
dd {
margin-left: 4em;
}
dl.no-nest > dt {
margin-left: 0em;
}
dl.no-nest > dd {
margin-left: 2em;
}
dl.root {
margin-bottom: 2em;
}
.definition {
display: block;
margin-bottom: 8em !important;
}
.definition .row {
display: block;
margin-bottom: 4em !important;
}
.definition h2 {
font-size: 1em;
font-weight: bolder;
}
.sep {
height: 2em;
}
code {
color: #DB61D9;
}
code .active {
color: #e83e8c;
}
code a {
color: #E94A93;
}
a.dotted:hover, abbr:hover {
text-decoration: underline #9E9689 dotted !important;
}
a.dotted, abbr {
text-decoration: none !important;
}
.gsc-search-box, .gsc-search-box-tools, .gsc-control-cse {
background: none !important;
border: none !important;
}
.gsc-search-button-v2, .gsc-search-button-v2:hover, .gsc-search-button-v2:focus {
color: var(--success) !important;
border-color: var(--success) !important;
background: none !important;
padding: 6px 32px !important;
font-size: inherit !important;
}
.gsc-search-button-v2 > svg {
fill: var(--success) !important;
}
.gsc-input-box {
border-radius: 3px;
}
.gsc-control-cse {
width: 300px !important;
margin-top: 0 !important;
}
.gsc-control-cse .gsc-control-cse-en {
margin-top: 0 !important;
}
.bg-dark {
background-color: #2C2F31 !important;
}
.text-muted {
color: #9E9689 !important;
}
.alert-primary {
color: #7CC3FF;
background-color: #262A2B;
border-color: #003B7B;
}
.alert-secondary {
color: #C2BCB4;
background-color: #282B2C;
border-color: #3B4042;
}
.alert-success {
color: #99E6AB;
background-color: #1A3E29;
border-color: #255A32;
}
.alert-info {
color: #8EE3F1;
background-color: #143B43;
border-color: #1E5961;
}
.alert-warning {
color: #FBD770;
background-color: #513E00;
border-color: #7B5C00;
}
.alert-danger {
color: rgb(225, 134, 143);
background-color: rgb(67, 12, 17);
border-color: rgb(104, 18, 27);
}
mark {
background-color: #333333;
border-radius: 0.1em;
color: #DB61D9;
}
</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<!-- body.mako -->
<nav id="main-nav" class="navbar navbar-dark navbar-expand-lg bg-dark">
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"/>
</button>
<a class="navbar-brand" href="https://github.com/hikari-py/hikari"><img class="d-inline-block align-top" src="https://hikari-py.github.io/hikari/logo.png" id="logo" alt="hikari logo" loading="lazy"/>Hikari <small>v2.0.0.dev92</small></a>
<div class="collapse navbar-collapse" id="navbarNavDropdown">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="/hikari/index.html">Home</a></li>
<li class="nav-item active"><a class="nav-link" href="/hikari/hikari/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/hikari-py/hikari">GitHub</a></li>
<li class="nav-item"><a class="nav-link" href="https://pypi.org/project/hikari">PyPI</a></li>
<li class="nav-item"><a class="nav-link" href="https://discord.gg/Jx4cNGG">Discord Server</a></li>
</ul>
<form class="form-inline" >
<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" id="lunr-search"/>
<button class="btn btn-outline-success my-2 my-sm-0" type="submit">&gt;</button>
</form>
</div>
</nav>
<div class="jumbotron jumbotron-fluid">
<div class="container">
<h1 class="display-4"><code>
<nav aria-label="breadcrumb">
<ol class="breadcrumb module-breadcrumb">
<li class="breadcrumb-item inactive"><a title="hikari -- A sane Python framework for writing modern Discord bots …" href="index.html"
>hikari</a></li>
<li class="breadcrumb-item active"><a href="#">event_stream</a></li>
</ol>
</nav>
</code></h1>
<p class="lead"><p>Streamers used for asynchronously iterating through gateway events.</p></p>
</div>
</div>
<div class="container-xl">
<div class="row">
<div class="d-md-none d-lg-block col-lg-5 col-xl-4">
<!--<nav class="nav" id="content-nav">-->
<h3>This module</h3>
<ul class="list-unstyled text-truncate">
<li class="monospaced">
<small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventStream -- An implementation of an event `Streamer` class …" href="#hikari.event_stream.EventStream"
>EventStream</a>
<ul class="list-unstyled nested text-truncate">
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="awaiting -- Await each item concurrently in a fixed size window …" href="iterators.html#hikari.iterators.LazyIterator.awaiting"
>awaiting</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="chunk -- Return results in chunks of up to `chunk_size` amount of entries …" href="iterators.html#hikari.iterators.LazyIterator.chunk"
>chunk</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="close -- Mark this streamer as closed to stop it from queueing and receiving events …" href="#hikari.event_stream.EventStream.close"
>close</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="collect -- Collect the results into a given type and return it …" href="iterators.html#hikari.iterators.LazyIterator.collect"
>collect</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="count -- Count the number of results …" href="iterators.html#hikari.iterators.LazyIterator.count"
>count</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="enumerate -- Enumerate the paginated results lazily …" href="iterators.html#hikari.iterators.LazyIterator.enumerate"
>enumerate</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="filter -- Filter the items by one or more conditions …" href="#hikari.event_stream.EventStream.filter"
>filter</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="flat_map -- Perform a flat mapping operation …" href="iterators.html#hikari.iterators.LazyIterator.flat_map"
>flat_map</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="for_each -- Pass each value to a given consumer immediately." href="iterators.html#hikari.iterators.LazyIterator.for_each"
>for_each</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="last -- Return the last element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.last"
>last</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="limit -- Limit the number of items you receive from this async iterator …" href="iterators.html#hikari.iterators.LazyIterator.limit"
>limit</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="map -- Map the values to a different value …" href="iterators.html#hikari.iterators.LazyIterator.map"
>map</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="next -- Return the next element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.next"
>next</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="open -- Mark this streamer as opened to let it start receiving and queueing events …" href="#hikari.event_stream.EventStream.open"
>open</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="reversed -- Return a lazy iterator of the remainder of this iterator's values reversed …" href="iterators.html#hikari.iterators.LazyIterator.reversed"
>reversed</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip -- Drop the given number of items, then yield anything after …" href="iterators.html#hikari.iterators.LazyIterator.skip"
>skip</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip_until -- Discard items while all conditions are False …" href="iterators.html#hikari.iterators.LazyIterator.skip_until"
>skip_until</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip_while -- Discard items while all conditions are True …" href="iterators.html#hikari.iterators.LazyIterator.skip_while"
>skip_while</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="sort -- Collect all results, then sort the collection before returning it." href="iterators.html#hikari.iterators.LazyIterator.sort"
>sort</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="take_until -- Return each item until any conditions pass or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_until"
>take_until</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="take_while -- Return each item until any conditions fail or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_while"
>take_while</a>
</li>
<br />
</ul>
</li>
<li class="monospaced">
<small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a>
<ul class="list-unstyled nested text-truncate">
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="awaiting -- Await each item concurrently in a fixed size window …" href="iterators.html#hikari.iterators.LazyIterator.awaiting"
>awaiting</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="chunk -- Return results in chunks of up to `chunk_size` amount of entries …" href="iterators.html#hikari.iterators.LazyIterator.chunk"
>chunk</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="close -- Mark this streamer as closed to stop it from queueing and receiving events …" href="#hikari.event_stream.Streamer.close"
>close</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="collect -- Collect the results into a given type and return it …" href="iterators.html#hikari.iterators.LazyIterator.collect"
>collect</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="count -- Count the number of results …" href="iterators.html#hikari.iterators.LazyIterator.count"
>count</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="enumerate -- Enumerate the paginated results lazily …" href="iterators.html#hikari.iterators.LazyIterator.enumerate"
>enumerate</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="filter -- Filter the items by one or more conditions …" href="iterators.html#hikari.iterators.LazyIterator.filter"
>filter</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="flat_map -- Perform a flat mapping operation …" href="iterators.html#hikari.iterators.LazyIterator.flat_map"
>flat_map</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="for_each -- Pass each value to a given consumer immediately." href="iterators.html#hikari.iterators.LazyIterator.for_each"
>for_each</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="last -- Return the last element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.last"
>last</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="limit -- Limit the number of items you receive from this async iterator …" href="iterators.html#hikari.iterators.LazyIterator.limit"
>limit</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="map -- Map the values to a different value …" href="iterators.html#hikari.iterators.LazyIterator.map"
>map</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="next -- Return the next element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.next"
>next</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="open -- Mark this streamer as opened to let it start receiving and queueing events …" href="#hikari.event_stream.Streamer.open"
>open</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="reversed -- Return a lazy iterator of the remainder of this iterator's values reversed …" href="iterators.html#hikari.iterators.LazyIterator.reversed"
>reversed</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip -- Drop the given number of items, then yield anything after …" href="iterators.html#hikari.iterators.LazyIterator.skip"
>skip</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip_until -- Discard items while all conditions are False …" href="iterators.html#hikari.iterators.LazyIterator.skip_until"
>skip_until</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="skip_while -- Discard items while all conditions are True …" href="iterators.html#hikari.iterators.LazyIterator.skip_while"
>skip_while</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="sort -- Collect all results, then sort the collection before returning it." href="iterators.html#hikari.iterators.LazyIterator.sort"
>sort</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="take_until -- Return each item until any conditions pass or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_until"
>take_until</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="take_while -- Return each item until any conditions fail or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_while"
>take_while</a>
</li>
<br />
</ul>
</li>
</ul>
<!--</nav>-->
</div>
<div class="col-xs-12 col-lg-7 col-xl-8">
<div class="row">
<div class="col module-source">
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L0-L244" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
# cython: language_level=3
# Copyright (c) 2020 Nekokatt
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the &#34;Software&#34;), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
&#34;&#34;&#34;Streamers used for asynchronously iterating through gateway events.&#34;&#34;&#34;

from __future__ import annotations

__all__: typing.List[str] = [&#34;Streamer&#34;, &#34;EventStream&#34;]

import abc
import asyncio
import logging
import typing
import weakref

from hikari import iterators

if typing.TYPE_CHECKING:
    import types

    from hikari import traits
    from hikari.events import base_events  # noqa F401 - Unused (False positive)

EventT = typing.TypeVar(&#34;EventT&#34;, bound=&#34;base_events.Event&#34;)
_LOGGER: typing.Final[logging.Logger] = logging.getLogger(&#34;hikari&#34;)


class Streamer(iterators.LazyIterator[EventT], abc.ABC):
    &#34;&#34;&#34;A base abstract class for all event streamers.

    Unlike `hikari.iterators.LazyIterator` (which this extends), an event
    streamer must be started and closed.

    Examples
    --------
    A streamer may either be started and closed using `async with` syntax
    where `Streamer.open` and `Streamer.close` are implicitly called based on
    context.

    ```py
    async with Streamer(app, EventType, timeout=50) as stream:
        async for entry in stream:
            ...
    ```

    A streamer may also be directly started and closed using the `Streamer.close`
    and `Streamer.open`. Note that if you don&#39;t call `Streamer.close` after
    opening a streamer when you&#39;re finished with it then it may queue events
    events in memory indefinitely.

    ```py
    stream = Streamer(app, EventType, timeout=50)
    await stream.open()
    async for event in stream:
        ...

    await stream.close()
    ```

    See Also
    --------
    LazyIterator: `hikari.iterators.LazyIterator`
    &#34;&#34;&#34;

    @abc.abstractmethod
    async def close(self) -&gt; None:
        &#34;&#34;&#34;Mark this streamer as closed to stop it from queueing and receiving events.

        If called on an already closed streamer then this will do nothing.

        !!! note
            `async with streamer` may be used as a short-cut for opening and
            closing a streamer.
        &#34;&#34;&#34;

    @abc.abstractmethod
    async def open(self) -&gt; None:
        &#34;&#34;&#34;Mark this streamer as opened to let it start receiving and queueing events.

        If called on an already started streamer then this will do nothing.

        !!! note
            `async with streamer` may be used as a short-cut for opening and
            closing a stream.
        &#34;&#34;&#34;

    async def __aenter__(self) -&gt; Streamer[EventT]:
        await self.open()
        return self

    async def __aexit__(
        self,
        exc_type: typing.Optional[typing.Type[BaseException]],
        exc: typing.Optional[BaseException],
        exc_tb: typing.Optional[types.TracebackType],
    ) -&gt; None:
        await self.close()

    def __enter__(self) -&gt; typing.NoReturn:
        # This is async only.
        cls = type(self)
        raise TypeError(f&#34;{cls.__module__}.{cls.__qualname__} is async-only, did you mean &#39;async with&#39;?&#34;) from None

    def __exit__(self, exc_type: typing.Type[Exception], exc_val: Exception, exc_tb: types.TracebackType) -&gt; None:
        return None


def _generate_weak_listener(
    reference: weakref.WeakMethod,
) -&gt; typing.Callable[[EventT], typing.Coroutine[typing.Any, typing.Any, None]]:
    async def call_weak_method(event: EventT) -&gt; None:
        method = reference()
        if method is None:
            raise TypeError(
                &#34;dead weak referenced subscriber method cannot be executed, try actually closing your event streamers&#34;
            )

        await method(event)

    return call_weak_method


class EventStream(Streamer[EventT]):
    &#34;&#34;&#34;An implementation of an event `Streamer` class.

    !!! note
        While calling `EventStream.filter` on an active &#34;opened&#34; event stream
        will return a wrapping lazy iterator, calling it on an inactive &#34;closed&#34;
        event stream will return the event stream and add the given predicates
        to the streamer.
    &#34;&#34;&#34;

    __slots__ = (&#34;_active&#34;, &#34;_app&#34;, &#34;_event_type&#34;, &#34;_filters&#34;, &#34;_queue&#34;, &#34;_registered_listener&#34;, &#34;_timeout&#34;)

    def __init__(
        self,
        app: traits.BotAware,
        event_type: typing.Type[EventT],
        *,
        timeout: typing.Union[float, int, None],
        limit: typing.Optional[int] = None,
    ) -&gt; None:
        self._app = app
        self._active = False
        self._event_type = event_type
        self._filters: iterators.All[EventT] = iterators.All(())
        # We accept `None` to represent unlimited here to be consistent with how `None` is already used to represent
        # unlimited for timeout in other places.
        self._queue: asyncio.Queue[EventT] = asyncio.Queue(limit or 0)
        self._registered_listener: typing.Optional[
            typing.Callable[[EventT], typing.Coroutine[typing.Any, typing.Any, None]]
        ] = None
        # The registered wrapping function for the weak ref to this class&#39;s _listener method.
        self._timeout = timeout

    async def _listener(self, event: EventT) -&gt; None:
        if not self._filters(event):
            return

        try:
            self._queue.put_nowait(event)
        except asyncio.QueueFull:
            pass

    async def __anext__(self) -&gt; EventT:
        if not self._active:
            raise TypeError(&#34;stream must be started with `async with` before entering it&#34;)

        try:
            return await asyncio.wait_for(self._queue.get(), timeout=self._timeout)
        except asyncio.TimeoutError:
            raise StopAsyncIteration from None

    async def _await_all(self) -&gt; typing.Sequence[EventT]:
        await self.open()
        result = [event async for event in self]
        await self.close()
        return result

    def __await__(self) -&gt; typing.Generator[None, None, typing.Sequence[EventT]]:
        return self._await_all().__await__()

    def __del__(self) -&gt; None:
        # For the sake of protecting highly intelligent people who forget to close this, we register the event listener
        # with a weakref then try to close this on deletion. While this may lead to their consoles being spammed, this
        # is a small price to pay as it&#39;ll be way more obvious what&#39;s wrong than if we just left them with a vague
        # ominous memory leak.
        if self._active:
            _LOGGER.warning(&#34;active %r streamer fell out of scope before being closed&#34;, self._event_type.__name__)
            try:
                asyncio.ensure_future(self.close())
            except RuntimeError:
                pass

    async def close(self) -&gt; None:
        if self._active and self._registered_listener is not None:
            try:
                self._app.dispatcher.unsubscribe(self._event_type, self._registered_listener)
            except ValueError:
                pass

            self._registered_listener = None

        self._active = False

    def filter(
        self,
        *predicates: typing.Union[typing.Tuple[str, typing.Any], typing.Callable[[EventT], bool]],
        **attrs: typing.Any,
    ) -&gt; typing.Union[EventStream[EventT], iterators.LazyIterator[EventT]]:
        if self._active:
            return super().filter(*predicates, **attrs)

        self._filters |= self._map_predicates_and_attr_getters(&#34;filter&#34;, *predicates, **attrs)
        return self

    async def open(self) -&gt; None:
        if not self._active:
            # For the sake of protecting highly intelligent people who forget to close this, we register the event
            # listener with a weakref then try to close this on deletion. While this may lead to their consoles being
            # spammed, this is a small price to pay as it&#39;ll be way more obvious what&#39;s wrong than if we just left them
            # with a vague ominous memory leak.
            reference = weakref.WeakMethod(self._listener)  # type: ignore[arg-type]
            listener = _generate_weak_listener(reference)
            self._registered_listener = listener
            self._app.dispatcher.subscribe(self._event_type, listener)
            self._active = True</code></pre>
</details>
</div>
</div>
<h2 id="class-heading">Classes</h2>
<section class="definition">
<dl class="no-nest root">
<dt>
<h4><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventStream -- An implementation of an event `Streamer` class …" href="#hikari.event_stream.EventStream"
>EventStream</a></h4>
</dt>
<dd>
<pre><code id="hikari.event_stream.EventStream" class="hljs python"><abbr title='A standard Python type.'>class</abbr> EventStream (
    app: <a href='traits.html#hikari.traits.BotAware'>traits.BotAware</a>,
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[EventT],
    *,
    timeout: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/functions.html#float'>float</a>, <a href='https://docs.python.org/3/library/functions.html#int'>int</a>, <a href='https://docs.python.org/3/library/constants.html#None'>None</a>],
    limit: <a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>] = None,
): ...</code></pre>
<p>An implementation of an event <code><a href='#hikari.event_stream.Streamer'>Streamer</a></code> class.</p>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p>While calling <code><a href='#hikari.event_stream.EventStream.filter'>filter</a></code> on an active "opened" event stream
will return a wrapping lazy iterator, calling it on an inactive "closed"
event stream will return the event stream and add the given predicates
to the streamer.</p>
</div>
<div class="sep"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L141-L245" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">class EventStream(Streamer[EventT]):
    &#34;&#34;&#34;An implementation of an event `Streamer` class.

    !!! note
        While calling `EventStream.filter` on an active &#34;opened&#34; event stream
        will return a wrapping lazy iterator, calling it on an inactive &#34;closed&#34;
        event stream will return the event stream and add the given predicates
        to the streamer.
    &#34;&#34;&#34;

    __slots__ = (&#34;_active&#34;, &#34;_app&#34;, &#34;_event_type&#34;, &#34;_filters&#34;, &#34;_queue&#34;, &#34;_registered_listener&#34;, &#34;_timeout&#34;)

    def __init__(
        self,
        app: traits.BotAware,
        event_type: typing.Type[EventT],
        *,
        timeout: typing.Union[float, int, None],
        limit: typing.Optional[int] = None,
    ) -&gt; None:
        self._app = app
        self._active = False
        self._event_type = event_type
        self._filters: iterators.All[EventT] = iterators.All(())
        # We accept `None` to represent unlimited here to be consistent with how `None` is already used to represent
        # unlimited for timeout in other places.
        self._queue: asyncio.Queue[EventT] = asyncio.Queue(limit or 0)
        self._registered_listener: typing.Optional[
            typing.Callable[[EventT], typing.Coroutine[typing.Any, typing.Any, None]]
        ] = None
        # The registered wrapping function for the weak ref to this class&#39;s _listener method.
        self._timeout = timeout

    async def _listener(self, event: EventT) -&gt; None:
        if not self._filters(event):
            return

        try:
            self._queue.put_nowait(event)
        except asyncio.QueueFull:
            pass

    async def __anext__(self) -&gt; EventT:
        if not self._active:
            raise TypeError(&#34;stream must be started with `async with` before entering it&#34;)

        try:
            return await asyncio.wait_for(self._queue.get(), timeout=self._timeout)
        except asyncio.TimeoutError:
            raise StopAsyncIteration from None

    async def _await_all(self) -&gt; typing.Sequence[EventT]:
        await self.open()
        result = [event async for event in self]
        await self.close()
        return result

    def __await__(self) -&gt; typing.Generator[None, None, typing.Sequence[EventT]]:
        return self._await_all().__await__()

    def __del__(self) -&gt; None:
        # For the sake of protecting highly intelligent people who forget to close this, we register the event listener
        # with a weakref then try to close this on deletion. While this may lead to their consoles being spammed, this
        # is a small price to pay as it&#39;ll be way more obvious what&#39;s wrong than if we just left them with a vague
        # ominous memory leak.
        if self._active:
            _LOGGER.warning(&#34;active %r streamer fell out of scope before being closed&#34;, self._event_type.__name__)
            try:
                asyncio.ensure_future(self.close())
            except RuntimeError:
                pass

    async def close(self) -&gt; None:
        if self._active and self._registered_listener is not None:
            try:
                self._app.dispatcher.unsubscribe(self._event_type, self._registered_listener)
            except ValueError:
                pass

            self._registered_listener = None

        self._active = False

    def filter(
        self,
        *predicates: typing.Union[typing.Tuple[str, typing.Any], typing.Callable[[EventT], bool]],
        **attrs: typing.Any,
    ) -&gt; typing.Union[EventStream[EventT], iterators.LazyIterator[EventT]]:
        if self._active:
            return super().filter(*predicates, **attrs)

        self._filters |= self._map_predicates_and_attr_getters(&#34;filter&#34;, *predicates, **attrs)
        return self

    async def open(self) -&gt; None:
        if not self._active:
            # For the sake of protecting highly intelligent people who forget to close this, we register the event
            # listener with a weakref then try to close this on deletion. While this may lead to their consoles being
            # spammed, this is a small price to pay as it&#39;ll be way more obvious what&#39;s wrong than if we just left them
            # with a vague ominous memory leak.
            reference = weakref.WeakMethod(self._listener)  # type: ignore[arg-type]
            listener = _generate_weak_listener(reference)
            self._registered_listener = listener
            self._app.dispatcher.subscribe(self._event_type, listener)
            self._active = True</code></pre>
</details>
<div class="sep"></div>
<h5>Subclasses</h5>
<dl>
<dt class="nested"><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="ChunkStream -- A specialised event stream used for triggering and streaming chunk events …" href="impl/stateful_guild_chunker.html#hikari.impl.stateful_guild_chunker.ChunkStream"
>ChunkStream</a></dt>
<dd class="nested"><p>A specialised event stream used for triggering and streaming chunk events …</p></dd>
</dl>
<div class="sep"></div>
<h5>Method resolution order</h5>
<dl>
<dt class="nested"><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventStream -- An implementation of an event `Streamer` class …" href="#hikari.event_stream.EventStream"
>EventStream</a></dt>
<dd class="nested"><em class="text-muted">That's this class!</em></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='An abstract base class which may have abstract methods and abstract properties.'>abstract</abbr> <abbr title='A standard Python type.'>class</abbr></em></small> <a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></dt>
<dd class="nested"><p>A base abstract class for all event streamers …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='An abstract base class which may have abstract methods and abstract properties.'>abstract</abbr> <abbr title='A standard Python type.'>class</abbr></em></small> <a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></dt>
<dd class="nested"><p>A set of results that are fetched asynchronously from the API as needed …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='Anything that is external to this library.'>extern</abbr> class</em></small> <a title="typing.Generic -- Abstract base class for generic types …" href="https://docs.python.org/3/library/typing.html#typing.Generic"
>Generic</a></dt>
<dd class="nested"><p>Abstract base class for generic types …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='Anything that is external to this library.'>extern</abbr> class</em></small> <a title="abc.ABC -- Helper class that provides a standard way to create an ABC using
inheritance." href="https://docs.python.org/3/library/abc.html#abc.ABC"
>abc.ABC</a></dt>
<dd class="nested"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></dd>
</dl>
<div class="sep"></div>
<h5>Methods</h5>
<dl>
<dt>
<pre><code id="hikari.event_stream.EventStream.awaiting" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="awaiting" href="iterators.html#hikari.iterators.LazyIterator.awaiting" id="hikari.event_stream.EventStream.awaiting">awaiting</a>(
    window_size: <a href='https://docs.python.org/3/library/functions.html#int'>int</a> = 10,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="awaiting -- Await each item concurrently in a fixed size window …" href="iterators.html#hikari.iterators.LazyIterator.awaiting"
>awaiting</a></code>
</p>
<p>Await each item concurrently in a fixed size window.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>window_size</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The window size of how many tasks to await at once. You can set this
to <code>0</code> to await everything at once, but see the below warning.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>The new lazy iterator to return.</dd>
</dl>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>Setting a large window size, or setting it to 0 to await everything
is a dangerous thing to do if you are making API calls. Some
endpoints will get ratelimited and cause a backup of waiting
tasks, others may begin to spam global rate limits instead
(the <code>fetch_user</code> endpoint seems to be notorious for doing this).</p>
</div>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p>This call assumes that the iterator contains awaitable values as
input. MyPy cannot detect this nicely, so any cast is forced
internally.</p>
<p>If the item is not awaitable, you will receive a
<code><a href='https://docs.python.org/3/library/exceptions.html#TypeError'>TypeError</a></code> instead.</p>
<p>You have been warned. You cannot escape the ways of the duck type
young grasshopper.</p>
</div>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.chunk" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="chunk" href="iterators.html#hikari.iterators.LazyIterator.chunk" id="hikari.event_stream.EventStream.chunk">chunk</a>(
    chunk_size: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="chunk -- Return results in chunks of up to `chunk_size` amount of entries …" href="iterators.html#hikari.iterators.LazyIterator.chunk"
>chunk</a></code>
</p>
<p>Return results in chunks of up to <code>chunk_size</code> amount of entries.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>chunk_size</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The limit for how many results should be returned in each chunk.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[ValueT]]</code></dt>
<dd><code>LazyIterator</code> that emits each chunked sequence.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.close" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="close" href="#hikari.event_stream.EventStream.close" id="hikari.event_stream.EventStream.close">close</a>() -> None: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="close -- Mark this streamer as closed to stop it from queueing and receiving events …" href="#hikari.event_stream.Streamer.close"
>close</a></code>
</p>
<p>Mark this streamer as closed to stop it from queueing and receiving events.</p>
<p>If called on an already closed streamer then this will do nothing.</p>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p><code>async with streamer</code> may be used as a short-cut for opening and
closing a streamer.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L213-L222" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def close(self) -&gt; None:
    if self._active and self._registered_listener is not None:
        try:
            self._app.dispatcher.unsubscribe(self._event_type, self._registered_listener)
        except ValueError:
            pass

        self._registered_listener = None

    self._active = False</code></pre>
</details>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.collect" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="collect" href="iterators.html#hikari.iterators.LazyIterator.collect" id="hikari.event_stream.EventStream.collect">collect</a>(
    collector: <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[<a href='#hikari.iterators.ValueT'>ValueT</a>]], <a href='https://docs.python.org/3/library/typing.html#typing.Collection'>Collection</a>[<a href='#hikari.iterators.ValueT'>ValueT</a>]],
) -> Collection[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="collect -- Collect the results into a given type and return it …" href="iterators.html#hikari.iterators.LazyIterator.collect"
>collect</a></code>
</p>
<p>Collect the results into a given type and return it.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>collector</code></strong></dt>
<dd>A function that consumes a sequence of values and returns a
collection.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.count" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="count" href="iterators.html#hikari.iterators.LazyIterator.count" id="hikari.event_stream.EventStream.count">count</a>() -> <a href='https://docs.python.org/3/library/functions.html#int'>int</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="count -- Count the number of results …" href="iterators.html#hikari.iterators.LazyIterator.count"
>count</a></code>
</p>
<p>Count the number of results.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>Number of results found.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.enumerate" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="enumerate" href="iterators.html#hikari.iterators.LazyIterator.enumerate" id="hikari.event_stream.EventStream.enumerate">enumerate</a>(
    *,
    start: <a href='https://docs.python.org/3/library/functions.html#int'>int</a> = 0,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>, ~<a href='#hikari.iterators.ValueT'>ValueT</a>]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="enumerate -- Enumerate the paginated results lazily …" href="iterators.html#hikari.iterators.LazyIterator.enumerate"
>enumerate</a></code>
</p>
<p>Enumerate the paginated results lazily.</p>
<p>This behaves as an asyncio-friendly version of <code><a href='https://docs.python.org/3/library/functions.html#enumerate'>enumerate</a></code>
which uses much less memory than collecting all the results first and
calling <code><a href='https://docs.python.org/3/library/functions.html#enumerate'>enumerate</a></code> across them.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>start</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>Optional int to start at. If omitted, this is <code>0</code>.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>&gt;&gt;&gt; async for i, item in paginated_results.enumerate():
...    print(i, item)
(0, foo)
(1, bar)
(2, baz)
(3, bork)
(4, qux)

&gt;&gt;&gt; async for i, item in paginated_results.enumerate(start=9):
...    print(i, item)
(9, foo)
(10, bar)
(11, baz)
(12, bork)
(13, qux)

&gt;&gt;&gt; async for i, item in paginated_results.enumerate(start=9).limit(3):
...    print(i, item)
(9, foo)
(10, bar)
(11, baz)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>, T]]</code></dt>
<dd>A paginated results view that asynchronously yields an increasing
counter in a tuple with each result, lazily.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.filter" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="filter" href="#hikari.event_stream.EventStream.filter" id="hikari.event_stream.EventStream.filter">filter</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[EventT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> Union[<a href='#hikari.event_stream.EventStream'>EventStream</a>[~EventT], <a href='iterators.html#hikari.iterators.LazyIterator'>LazyIterator</a>[~EventT]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="filter -- Filter the items by one or more conditions …" href="iterators.html#hikari.iterators.LazyIterator.filter"
>filter</a></code>
</p>
<p>Filter the items by one or more conditions.</p>
<p>Each condition is treated as a predicate, being called with each item
that this iterator would return when it is requested.</p>
<p>All conditions must evaluate to <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> for the item to be
returned. If this is not met, then the item is discared and ignored,
the next matching item will be returned instead, if there is one.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.filter(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd><code>LazyIterator</code> that only emits values where all conditions are
matched.</dd>
</dl>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L224-L233" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">def filter(
    self,
    *predicates: typing.Union[typing.Tuple[str, typing.Any], typing.Callable[[EventT], bool]],
    **attrs: typing.Any,
) -&gt; typing.Union[EventStream[EventT], iterators.LazyIterator[EventT]]:
    if self._active:
        return super().filter(*predicates, **attrs)

    self._filters |= self._map_predicates_and_attr_getters(&#34;filter&#34;, *predicates, **attrs)
    return self</code></pre>
</details>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.flat_map" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="flat_map" href="iterators.html#hikari.iterators.LazyIterator.flat_map" id="hikari.event_stream.EventStream.flat_map">flat_map</a>(
    flattener: _FlattenerT[<a href='#hikari.iterators.ValueT'>ValueT</a>, <a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>],
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="flat_map -- Perform a flat mapping operation …" href="iterators.html#hikari.iterators.LazyIterator.flat_map"
>flat_map</a></code>
</p>
<p>Perform a flat mapping operation.</p>
<p>This will pass each item in the iterator to the given <code><a href='https://docs.python.org/3/reference/compound_stmts.html#function'>function</a></code>
parameter, expecting a new <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code> or <code><a href='https://docs.python.org/3/library/typing.html#typing.AsyncIterator'>AsyncIterator</a></code>
to be returned as the result. This means you can map to a new
<code>LazyIterator</code>, <code><a href='https://docs.python.org/3/library/typing.html#typing.AsyncIterator'>AsyncIterator</a></code>, <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code>,
async generator, or generator.</p>
<p>Remember that <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterator'>Iterator</a></code> implicitly provides <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code>
compatibility.</p>
<p>This is used to provide lazy conversions, and can be used to implement
reactive-like pipelines if desired.</p>
<p>All results are combined into one large lazy iterator and yielded
lazily.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>flattener</code></strong></dt>
<dd>A function that returns either an async iterator or iterator of
new values. Could be an attribute name instead.</dd>
</dl>
<h2 id="example">Example</h2>
<p>The following example generates a distinct collection of all mentioned
users in the given channel from the past 500 messages.</p>
<pre><code class="language-py">def iter_mentioned_users(message: hikari.Message) -&gt; typing.Iterable[Snowflake]:
    for match in re.findall(r&quot;&lt;@!?(\d+)&gt;&quot;, message.content):
        yield Snowflake(match)

mentioned_users = await (
    channel
    .history()
    .limit(500)
    .map(&quot;.content&quot;)
    .flat_map(iter_mentioned_users)
    .distinct()
)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[AnotherValueT]</code></dt>
<dd>The new lazy iterator to return.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.for_each" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="for_each" href="iterators.html#hikari.iterators.LazyIterator.for_each" id="hikari.event_stream.EventStream.for_each">for_each</a>(
    consumer: <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>],
) -> None: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="for_each -- Pass each value to a given consumer immediately." href="iterators.html#hikari.iterators.LazyIterator.for_each"
>for_each</a></code>
</p>
<p>Pass each value to a given consumer immediately.</p>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.last" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="last" href="iterators.html#hikari.iterators.LazyIterator.last" id="hikari.event_stream.EventStream.last">last</a>() -> ~<a href='#hikari.iterators.ValueT'>ValueT</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="last -- Return the last element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.last"
>last</a></code>
</p>
<p>Return the last element of this iterator only.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ValueT</code></dt>
<dd>The last result.</dd>
</dl>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p>This method will consume the whole iterator if run.</p>
</div>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/exceptions.html#LookupError'>LookupError</a></code></dt>
<dd>If no result exists.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.limit" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="limit" href="iterators.html#hikari.iterators.LazyIterator.limit" id="hikari.event_stream.EventStream.limit">limit</a>(
    limit: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="limit -- Limit the number of items you receive from this async iterator …" href="iterators.html#hikari.iterators.LazyIterator.limit"
>limit</a></code>
</p>
<p>Limit the number of items you receive from this async iterator.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>limit</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The number of items to get. This must be greater than zero.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>&gt;&gt;&gt; async for item in paginated_results.limit(3):
...     print(item)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>A paginated results view that asynchronously yields a maximum
of the given number of items before completing.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.map" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="map" href="iterators.html#hikari.iterators.LazyIterator.map" id="hikari.event_stream.EventStream.map">map</a>(
    transformation: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>], <a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>],
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="map -- Map the values to a different value …" href="iterators.html#hikari.iterators.LazyIterator.map"
>map</a></code>
</p>
<p>Map the values to a different value.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>transformation</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>]</code></dt>
<dd>The function to use to map the attribute. This may alternatively
be a string attribute name to replace the input value with. You
can provide nested attributes using the <code>.</code> operator.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[AnotherValueT]</code></dt>
<dd><code>LazyIterator</code> that maps each value to another value.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.next" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="next" href="iterators.html#hikari.iterators.LazyIterator.next" id="hikari.event_stream.EventStream.next">next</a>() -> ~<a href='#hikari.iterators.ValueT'>ValueT</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="next -- Return the next element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.next"
>next</a></code>
</p>
<p>Return the next element of this iterator only.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ValueT</code></dt>
<dd>The next result.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/exceptions.html#LookupError'>LookupError</a></code></dt>
<dd>If no more results exist.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.open" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="open" href="#hikari.event_stream.EventStream.open" id="hikari.event_stream.EventStream.open">open</a>() -> None: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="open -- Mark this streamer as opened to let it start receiving and queueing events …" href="#hikari.event_stream.Streamer.open"
>open</a></code>
</p>
<p>Mark this streamer as opened to let it start receiving and queueing events.</p>
<p>If called on an already started streamer then this will do nothing.</p>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p><code>async with streamer</code> may be used as a short-cut for opening and
closing a stream.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L235-L245" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def open(self) -&gt; None:
    if not self._active:
        # For the sake of protecting highly intelligent people who forget to close this, we register the event
        # listener with a weakref then try to close this on deletion. While this may lead to their consoles being
        # spammed, this is a small price to pay as it&#39;ll be way more obvious what&#39;s wrong than if we just left them
        # with a vague ominous memory leak.
        reference = weakref.WeakMethod(self._listener)  # type: ignore[arg-type]
        listener = _generate_weak_listener(reference)
        self._registered_listener = listener
        self._app.dispatcher.subscribe(self._event_type, listener)
        self._active = True</code></pre>
</details>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.reversed" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="reversed" href="iterators.html#hikari.iterators.LazyIterator.reversed" id="hikari.event_stream.EventStream.reversed">reversed</a>() -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="reversed -- Return a lazy iterator of the remainder of this iterator's values reversed …" href="iterators.html#hikari.iterators.LazyIterator.reversed"
>reversed</a></code>
</p>
<p>Return a lazy iterator of the remainder of this iterator's values reversed.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>The lazy iterator of this iterator's remaining values reversed.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.skip" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip" href="iterators.html#hikari.iterators.LazyIterator.skip" id="hikari.event_stream.EventStream.skip">skip</a>(
    number: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="skip -- Drop the given number of items, then yield anything after …" href="iterators.html#hikari.iterators.LazyIterator.skip"
>skip</a></code>
</p>
<p>Drop the given number of items, then yield anything after.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>number</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The max number of items to drop before any items are yielded.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>A paginated results view that asynchronously yields all items
AFTER the given number of items are discarded first.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.skip_until" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip_until" href="iterators.html#hikari.iterators.LazyIterator.skip_until" id="hikari.event_stream.EventStream.skip_until">skip_until</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="skip_until -- Discard items while all conditions are False …" href="iterators.html#hikari.iterators.LazyIterator.skip_until"
>skip_until</a></code>
</p>
<p>Discard items while all conditions are False.</p>
<p>Items after this will be yielded as normal.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes are
referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.skip_until(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values once a condition has failed.
All items before this are discarded.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.skip_while" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip_while" href="iterators.html#hikari.iterators.LazyIterator.skip_while" id="hikari.event_stream.EventStream.skip_while">skip_while</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="skip_while -- Discard items while all conditions are True …" href="iterators.html#hikari.iterators.LazyIterator.skip_while"
>skip_while</a></code>
</p>
<p>Discard items while all conditions are True.</p>
<p>Items after this will be yielded as normal.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.skip_while(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values once a condition has been met.
All items before this are discarded.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.sort" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="sort" href="iterators.html#hikari.iterators.LazyIterator.sort" id="hikari.event_stream.EventStream.sort">sort</a>(
    *,
    key: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a> = None,
    reverse: <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a> = False,
) -> Sequence[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="sort -- Collect all results, then sort the collection before returning it." href="iterators.html#hikari.iterators.LazyIterator.sort"
>sort</a></code>
</p>
<p>Collect all results, then sort the collection before returning it.</p>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.take_until" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="take_until" href="iterators.html#hikari.iterators.LazyIterator.take_until" id="hikari.event_stream.EventStream.take_until">take_until</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="take_until -- Return each item until any conditions pass or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_until"
>take_until</a></code>
</p>
<p>Return each item until any conditions pass or the end is reached.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes are
referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.take_until(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values until any conditions are
matched.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.EventStream.take_while" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="take_while" href="iterators.html#hikari.iterators.LazyIterator.take_while" id="hikari.event_stream.EventStream.take_while">take_while</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></code>.<code><a title="take_while -- Return each item until any conditions fail or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_while"
>take_while</a></code>
</p>
<p>Return each item until any conditions fail or the end is reached.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.take_while(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values until any conditions are not
matched.</dd>
</dl>
</dd>
<div class="sep"></div>
</dl>
<div class="sep"></div>
</dd>
<dt>
<h4><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></h4>
</dt>
<dd>
<pre><code id="hikari.event_stream.Streamer" class="hljs python"><abbr title='A standard Python type.'>class</abbr> Streamer (
    *args,
    **kwds,
): ...</code></pre>
<p>A base abstract class for all event streamers.</p>
<p>Unlike <code><a href='iterators.html#hikari.iterators.LazyIterator'>LazyIterator</a></code> (which this extends), an event
streamer must be started and closed.</p>
<h2 id="examples">Examples</h2>
<p>A streamer may either be started and closed using <code>async with</code> syntax
where <code><a href='#hikari.event_stream.Streamer.open'>open</a></code> and <code><a href='#hikari.event_stream.Streamer.close'>close</a></code> are implicitly called based on
context.</p>
<pre><code class="language-py">async with Streamer(app, EventType, timeout=50) as stream:
    async for entry in stream:
        ...
</code></pre>
<p>A streamer may also be directly started and closed using the <code><a href='#hikari.event_stream.Streamer.close'>close</a></code>
and <code><a href='#hikari.event_stream.Streamer.open'>open</a></code>. Note that if you don't call <code><a href='#hikari.event_stream.Streamer.close'>close</a></code> after
opening a streamer when you're finished with it then it may queue events
events in memory indefinitely.</p>
<pre><code class="language-py">stream = Streamer(app, EventType, timeout=50)
await stream.open()
async for event in stream:
    ...

await stream.close()
</code></pre>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>LazyIterator</code></dt>
<dd><code><a href='iterators.html#hikari.iterators.LazyIterator'>LazyIterator</a></code></dd>
</dl>
<div class="sep"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L46-L123" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">class Streamer(iterators.LazyIterator[EventT], abc.ABC):
    &#34;&#34;&#34;A base abstract class for all event streamers.

    Unlike `hikari.iterators.LazyIterator` (which this extends), an event
    streamer must be started and closed.

    Examples
    --------
    A streamer may either be started and closed using `async with` syntax
    where `Streamer.open` and `Streamer.close` are implicitly called based on
    context.

    ```py
    async with Streamer(app, EventType, timeout=50) as stream:
        async for entry in stream:
            ...
    ```

    A streamer may also be directly started and closed using the `Streamer.close`
    and `Streamer.open`. Note that if you don&#39;t call `Streamer.close` after
    opening a streamer when you&#39;re finished with it then it may queue events
    events in memory indefinitely.

    ```py
    stream = Streamer(app, EventType, timeout=50)
    await stream.open()
    async for event in stream:
        ...

    await stream.close()
    ```

    See Also
    --------
    LazyIterator: `hikari.iterators.LazyIterator`
    &#34;&#34;&#34;

    @abc.abstractmethod
    async def close(self) -&gt; None:
        &#34;&#34;&#34;Mark this streamer as closed to stop it from queueing and receiving events.

        If called on an already closed streamer then this will do nothing.

        !!! note
            `async with streamer` may be used as a short-cut for opening and
            closing a streamer.
        &#34;&#34;&#34;

    @abc.abstractmethod
    async def open(self) -&gt; None:
        &#34;&#34;&#34;Mark this streamer as opened to let it start receiving and queueing events.

        If called on an already started streamer then this will do nothing.

        !!! note
            `async with streamer` may be used as a short-cut for opening and
            closing a stream.
        &#34;&#34;&#34;

    async def __aenter__(self) -&gt; Streamer[EventT]:
        await self.open()
        return self

    async def __aexit__(
        self,
        exc_type: typing.Optional[typing.Type[BaseException]],
        exc: typing.Optional[BaseException],
        exc_tb: typing.Optional[types.TracebackType],
    ) -&gt; None:
        await self.close()

    def __enter__(self) -&gt; typing.NoReturn:
        # This is async only.
        cls = type(self)
        raise TypeError(f&#34;{cls.__module__}.{cls.__qualname__} is async-only, did you mean &#39;async with&#39;?&#34;) from None

    def __exit__(self, exc_type: typing.Type[Exception], exc_val: Exception, exc_tb: types.TracebackType) -&gt; None:
        return None</code></pre>
</details>
<div class="sep"></div>
<h5>Subclasses</h5>
<dl>
<dt class="nested"><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventStream -- An implementation of an event `Streamer` class …" href="#hikari.event_stream.EventStream"
>EventStream</a></dt>
<dd class="nested"><p>An implementation of an event <code><a href='#hikari.event_stream.Streamer'>Streamer</a></code> class …</p></dd>
</dl>
<div class="sep"></div>
<h5>Method resolution order</h5>
<dl>
<dt class="nested"><small class='text-muted'><em><abbr title='An abstract base class which may have abstract methods and abstract properties.'>abstract</abbr> <abbr title='A standard Python type.'>class</abbr></em></small> <a title="Streamer -- A base abstract class for all event streamers …" href="#hikari.event_stream.Streamer"
>Streamer</a></dt>
<dd class="nested"><em class="text-muted">That's this class!</em></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='An abstract base class which may have abstract methods and abstract properties.'>abstract</abbr> <abbr title='A standard Python type.'>class</abbr></em></small> <a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></dt>
<dd class="nested"><p>A set of results that are fetched asynchronously from the API as needed …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='Anything that is external to this library.'>extern</abbr> class</em></small> <a title="typing.Generic -- Abstract base class for generic types …" href="https://docs.python.org/3/library/typing.html#typing.Generic"
>Generic</a></dt>
<dd class="nested"><p>Abstract base class for generic types …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='Anything that is external to this library.'>extern</abbr> class</em></small> <a title="abc.ABC -- Helper class that provides a standard way to create an ABC using
inheritance." href="https://docs.python.org/3/library/abc.html#abc.ABC"
>abc.ABC</a></dt>
<dd class="nested"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></dd>
</dl>
<div class="sep"></div>
<h5>Methods</h5>
<dl>
<dt>
<pre><code id="hikari.event_stream.Streamer.awaiting" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="awaiting" href="iterators.html#hikari.iterators.LazyIterator.awaiting" id="hikari.event_stream.Streamer.awaiting">awaiting</a>(
    window_size: <a href='https://docs.python.org/3/library/functions.html#int'>int</a> = 10,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="awaiting -- Await each item concurrently in a fixed size window …" href="iterators.html#hikari.iterators.LazyIterator.awaiting"
>awaiting</a></code>
</p>
<p>Await each item concurrently in a fixed size window.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>window_size</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The window size of how many tasks to await at once. You can set this
to <code>0</code> to await everything at once, but see the below warning.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>The new lazy iterator to return.</dd>
</dl>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>Setting a large window size, or setting it to 0 to await everything
is a dangerous thing to do if you are making API calls. Some
endpoints will get ratelimited and cause a backup of waiting
tasks, others may begin to spam global rate limits instead
(the <code>fetch_user</code> endpoint seems to be notorious for doing this).</p>
</div>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p>This call assumes that the iterator contains awaitable values as
input. MyPy cannot detect this nicely, so any cast is forced
internally.</p>
<p>If the item is not awaitable, you will receive a
<code><a href='https://docs.python.org/3/library/exceptions.html#TypeError'>TypeError</a></code> instead.</p>
<p>You have been warned. You cannot escape the ways of the duck type
young grasshopper.</p>
</div>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.chunk" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="chunk" href="iterators.html#hikari.iterators.LazyIterator.chunk" id="hikari.event_stream.Streamer.chunk">chunk</a>(
    chunk_size: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="chunk -- Return results in chunks of up to `chunk_size` amount of entries …" href="iterators.html#hikari.iterators.LazyIterator.chunk"
>chunk</a></code>
</p>
<p>Return results in chunks of up to <code>chunk_size</code> amount of entries.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>chunk_size</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The limit for how many results should be returned in each chunk.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[ValueT]]</code></dt>
<dd><code>LazyIterator</code> that emits each chunked sequence.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.close" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="close" href="#hikari.event_stream.Streamer.close" id="hikari.event_stream.Streamer.close">close</a>() -> None: ...</code></pre>
</dt>
<dd>
<p>Mark this streamer as closed to stop it from queueing and receiving events.</p>
<p>If called on an already closed streamer then this will do nothing.</p>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p><code>async with streamer</code> may be used as a short-cut for opening and
closing a streamer.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L83-L92" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">@abc.abstractmethod
async def close(self) -&gt; None:
    &#34;&#34;&#34;Mark this streamer as closed to stop it from queueing and receiving events.

    If called on an already closed streamer then this will do nothing.

    !!! note
        `async with streamer` may be used as a short-cut for opening and
        closing a streamer.
    &#34;&#34;&#34;</code></pre>
</details>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.collect" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="collect" href="iterators.html#hikari.iterators.LazyIterator.collect" id="hikari.event_stream.Streamer.collect">collect</a>(
    collector: <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='https://docs.python.org/3/library/typing.html#typing.Sequence'>Sequence</a>[<a href='#hikari.iterators.ValueT'>ValueT</a>]], <a href='https://docs.python.org/3/library/typing.html#typing.Collection'>Collection</a>[<a href='#hikari.iterators.ValueT'>ValueT</a>]],
) -> Collection[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="collect -- Collect the results into a given type and return it …" href="iterators.html#hikari.iterators.LazyIterator.collect"
>collect</a></code>
</p>
<p>Collect the results into a given type and return it.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>collector</code></strong></dt>
<dd>A function that consumes a sequence of values and returns a
collection.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.count" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="count" href="iterators.html#hikari.iterators.LazyIterator.count" id="hikari.event_stream.Streamer.count">count</a>() -> <a href='https://docs.python.org/3/library/functions.html#int'>int</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="count -- Count the number of results …" href="iterators.html#hikari.iterators.LazyIterator.count"
>count</a></code>
</p>
<p>Count the number of results.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>Number of results found.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.enumerate" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="enumerate" href="iterators.html#hikari.iterators.LazyIterator.enumerate" id="hikari.event_stream.Streamer.enumerate">enumerate</a>(
    *,
    start: <a href='https://docs.python.org/3/library/functions.html#int'>int</a> = 0,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>, ~<a href='#hikari.iterators.ValueT'>ValueT</a>]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="enumerate -- Enumerate the paginated results lazily …" href="iterators.html#hikari.iterators.LazyIterator.enumerate"
>enumerate</a></code>
</p>
<p>Enumerate the paginated results lazily.</p>
<p>This behaves as an asyncio-friendly version of <code><a href='https://docs.python.org/3/library/functions.html#enumerate'>enumerate</a></code>
which uses much less memory than collecting all the results first and
calling <code><a href='https://docs.python.org/3/library/functions.html#enumerate'>enumerate</a></code> across them.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>start</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>Optional int to start at. If omitted, this is <code>0</code>.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>&gt;&gt;&gt; async for i, item in paginated_results.enumerate():
...    print(i, item)
(0, foo)
(1, bar)
(2, baz)
(3, bork)
(4, qux)

&gt;&gt;&gt; async for i, item in paginated_results.enumerate(start=9):
...    print(i, item)
(9, foo)
(10, bar)
(11, baz)
(12, bork)
(13, qux)

&gt;&gt;&gt; async for i, item in paginated_results.enumerate(start=9).limit(3):
...    print(i, item)
(9, foo)
(10, bar)
(11, baz)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>, T]]</code></dt>
<dd>A paginated results view that asynchronously yields an increasing
counter in a tuple with each result, lazily.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.filter" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="filter" href="iterators.html#hikari.iterators.LazyIterator.filter" id="hikari.event_stream.Streamer.filter">filter</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="filter -- Filter the items by one or more conditions …" href="iterators.html#hikari.iterators.LazyIterator.filter"
>filter</a></code>
</p>
<p>Filter the items by one or more conditions.</p>
<p>Each condition is treated as a predicate, being called with each item
that this iterator would return when it is requested.</p>
<p>All conditions must evaluate to <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> for the item to be
returned. If this is not met, then the item is discared and ignored,
the next matching item will be returned instead, if there is one.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.filter(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd><code>LazyIterator</code> that only emits values where all conditions are
matched.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.flat_map" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="flat_map" href="iterators.html#hikari.iterators.LazyIterator.flat_map" id="hikari.event_stream.Streamer.flat_map">flat_map</a>(
    flattener: _FlattenerT[<a href='#hikari.iterators.ValueT'>ValueT</a>, <a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>],
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="flat_map -- Perform a flat mapping operation …" href="iterators.html#hikari.iterators.LazyIterator.flat_map"
>flat_map</a></code>
</p>
<p>Perform a flat mapping operation.</p>
<p>This will pass each item in the iterator to the given <code><a href='https://docs.python.org/3/reference/compound_stmts.html#function'>function</a></code>
parameter, expecting a new <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code> or <code><a href='https://docs.python.org/3/library/typing.html#typing.AsyncIterator'>AsyncIterator</a></code>
to be returned as the result. This means you can map to a new
<code>LazyIterator</code>, <code><a href='https://docs.python.org/3/library/typing.html#typing.AsyncIterator'>AsyncIterator</a></code>, <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code>,
async generator, or generator.</p>
<p>Remember that <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterator'>Iterator</a></code> implicitly provides <code><a href='https://docs.python.org/3/library/typing.html#typing.Iterable'>Iterable</a></code>
compatibility.</p>
<p>This is used to provide lazy conversions, and can be used to implement
reactive-like pipelines if desired.</p>
<p>All results are combined into one large lazy iterator and yielded
lazily.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>flattener</code></strong></dt>
<dd>A function that returns either an async iterator or iterator of
new values. Could be an attribute name instead.</dd>
</dl>
<h2 id="example">Example</h2>
<p>The following example generates a distinct collection of all mentioned
users in the given channel from the past 500 messages.</p>
<pre><code class="language-py">def iter_mentioned_users(message: hikari.Message) -&gt; typing.Iterable[Snowflake]:
    for match in re.findall(r&quot;&lt;@!?(\d+)&gt;&quot;, message.content):
        yield Snowflake(match)

mentioned_users = await (
    channel
    .history()
    .limit(500)
    .map(&quot;.content&quot;)
    .flat_map(iter_mentioned_users)
    .distinct()
)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[AnotherValueT]</code></dt>
<dd>The new lazy iterator to return.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.for_each" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="for_each" href="iterators.html#hikari.iterators.LazyIterator.for_each" id="hikari.event_stream.Streamer.for_each">for_each</a>(
    consumer: <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>],
) -> None: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="for_each -- Pass each value to a given consumer immediately." href="iterators.html#hikari.iterators.LazyIterator.for_each"
>for_each</a></code>
</p>
<p>Pass each value to a given consumer immediately.</p>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.last" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="last" href="iterators.html#hikari.iterators.LazyIterator.last" id="hikari.event_stream.Streamer.last">last</a>() -> ~<a href='#hikari.iterators.ValueT'>ValueT</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="last -- Return the last element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.last"
>last</a></code>
</p>
<p>Return the last element of this iterator only.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ValueT</code></dt>
<dd>The last result.</dd>
</dl>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p>This method will consume the whole iterator if run.</p>
</div>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/exceptions.html#LookupError'>LookupError</a></code></dt>
<dd>If no result exists.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.limit" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="limit" href="iterators.html#hikari.iterators.LazyIterator.limit" id="hikari.event_stream.Streamer.limit">limit</a>(
    limit: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="limit -- Limit the number of items you receive from this async iterator …" href="iterators.html#hikari.iterators.LazyIterator.limit"
>limit</a></code>
</p>
<p>Limit the number of items you receive from this async iterator.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>limit</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The number of items to get. This must be greater than zero.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code>&gt;&gt;&gt; async for item in paginated_results.limit(3):
...     print(item)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>A paginated results view that asynchronously yields a maximum
of the given number of items before completing.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.map" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="map" href="iterators.html#hikari.iterators.LazyIterator.map" id="hikari.event_stream.Streamer.map">map</a>(
    transformation: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>], <a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>],
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.AnotherValueT'>AnotherValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="map -- Map the values to a different value …" href="iterators.html#hikari.iterators.LazyIterator.map"
>map</a></code>
</p>
<p>Map the values to a different value.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>transformation</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>]</code></dt>
<dd>The function to use to map the attribute. This may alternatively
be a string attribute name to replace the input value with. You
can provide nested attributes using the <code>.</code> operator.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[AnotherValueT]</code></dt>
<dd><code>LazyIterator</code> that maps each value to another value.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.next" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="next" href="iterators.html#hikari.iterators.LazyIterator.next" id="hikari.event_stream.Streamer.next">next</a>() -> ~<a href='#hikari.iterators.ValueT'>ValueT</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="next -- Return the next element of this iterator only …" href="iterators.html#hikari.iterators.LazyIterator.next"
>next</a></code>
</p>
<p>Return the next element of this iterator only.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ValueT</code></dt>
<dd>The next result.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/exceptions.html#LookupError'>LookupError</a></code></dt>
<dd>If no more results exist.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.open" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="open" href="#hikari.event_stream.Streamer.open" id="hikari.event_stream.Streamer.open">open</a>() -> None: ...</code></pre>
</dt>
<dd>
<p>Mark this streamer as opened to let it start receiving and queueing events.</p>
<p>If called on an already started streamer then this will do nothing.</p>
<div class="alert alert-success">
<p class="admonition-title">Note</p>
<p><code>async with streamer</code> may be used as a short-cut for opening and
closing a stream.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/c8d88c83b926f0874158593f8bc7ba0f580a97d8/hikari/event_stream.py#L94-L103" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">@abc.abstractmethod
async def open(self) -&gt; None:
    &#34;&#34;&#34;Mark this streamer as opened to let it start receiving and queueing events.

    If called on an already started streamer then this will do nothing.

    !!! note
        `async with streamer` may be used as a short-cut for opening and
        closing a stream.
    &#34;&#34;&#34;</code></pre>
</details>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.reversed" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="reversed" href="iterators.html#hikari.iterators.LazyIterator.reversed" id="hikari.event_stream.Streamer.reversed">reversed</a>() -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="reversed -- Return a lazy iterator of the remainder of this iterator's values reversed …" href="iterators.html#hikari.iterators.LazyIterator.reversed"
>reversed</a></code>
</p>
<p>Return a lazy iterator of the remainder of this iterator's values reversed.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>The lazy iterator of this iterator's remaining values reversed.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.skip" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip" href="iterators.html#hikari.iterators.LazyIterator.skip" id="hikari.event_stream.Streamer.skip">skip</a>(
    number: <a href='https://docs.python.org/3/library/functions.html#int'>int</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="skip -- Drop the given number of items, then yield anything after …" href="iterators.html#hikari.iterators.LazyIterator.skip"
>skip</a></code>
</p>
<p>Drop the given number of items, then yield anything after.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>number</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#int'>int</a></code></dt>
<dd>The max number of items to drop before any items are yielded.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>A paginated results view that asynchronously yields all items
AFTER the given number of items are discarded first.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.skip_until" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip_until" href="iterators.html#hikari.iterators.LazyIterator.skip_until" id="hikari.event_stream.Streamer.skip_until">skip_until</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="skip_until -- Discard items while all conditions are False …" href="iterators.html#hikari.iterators.LazyIterator.skip_until"
>skip_until</a></code>
</p>
<p>Discard items while all conditions are False.</p>
<p>Items after this will be yielded as normal.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes are
referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.skip_until(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values once a condition has failed.
All items before this are discarded.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.skip_while" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="skip_while" href="iterators.html#hikari.iterators.LazyIterator.skip_while" id="hikari.event_stream.Streamer.skip_while">skip_while</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="skip_while -- Discard items while all conditions are True …" href="iterators.html#hikari.iterators.LazyIterator.skip_while"
>skip_while</a></code>
</p>
<p>Discard items while all conditions are True.</p>
<p>Items after this will be yielded as normal.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.skip_while(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values once a condition has been met.
All items before this are discarded.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.sort" class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="sort" href="iterators.html#hikari.iterators.LazyIterator.sort" id="hikari.event_stream.Streamer.sort">sort</a>(
    *,
    key: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a> = None,
    reverse: <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a> = False,
) -> Sequence[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="sort -- Collect all results, then sort the collection before returning it." href="iterators.html#hikari.iterators.LazyIterator.sort"
>sort</a></code>
</p>
<p>Collect all results, then sort the collection before returning it.</p>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.take_until" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="take_until" href="iterators.html#hikari.iterators.LazyIterator.take_until" id="hikari.event_stream.Streamer.take_until">take_until</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="take_until -- Return each item until any conditions pass or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_until"
>take_until</a></code>
</p>
<p>Return each item until any conditions pass or the end is reached.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes are
referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.take_until(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values until any conditions are
matched.</dd>
</dl>
</dd>
<div class="sep"></div>
<dt>
<pre><code id="hikari.event_stream.Streamer.take_while" class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="take_while" href="iterators.html#hikari.iterators.LazyIterator.take_while" id="hikari.event_stream.Streamer.take_while">take_while</a>(
    *predicates: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[<a href='#hikari.iterators.ValueT'>ValueT</a>], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>]],
    **attrs: <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>,
) -> <a href='#hikari.iterators.LazyIterator'>LazyIterator</a>[~<a href='#hikari.iterators.ValueT'>ValueT</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="LazyIterator -- A set of results that are fetched asynchronously from the API as needed …" href="iterators.html#hikari.iterators.LazyIterator"
>LazyIterator</a></code>.<code><a title="take_while -- Return each item until any conditions fail or the end is reached …" href="iterators.html#hikari.iterators.LazyIterator.take_while"
>take_while</a></code>
</p>
<p>Return each item until any conditions fail or the end is reached.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>*predicates</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[ValueT], <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a>], <a href='https://docs.python.org/3/library/typing.html#typing.Tuple'>Tuple</a>[<a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]]</code></dt>
<dd>Predicates to invoke. These are functions that take a value and
return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if it is of interest, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>
otherwise. These may instead include 2-<code><a href='https://docs.python.org/3/library/stdtypes.html#tuple'>tuple</a></code> objects
consisting of a <code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code> attribute name (nested attributes
are referred to using the <code>.</code> operator), and values to compare for
equality. This allows you to specify conditions such as
<code>members.take_while(("user.bot", <a href='https://docs.python.org/3/library/constants.html#True'>True</a>))</code>.</dd>
<dt><strong><code>**attrs</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a></code></dt>
<dd>Alternative to passing 2-tuples. Cannot specify nested attributes
using this method.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>LazyIterator[ValueT]</code></dt>
<dd>LazyIterator that only emits values until any conditions are not
matched.</dd>
</dl>
</dd>
<div class="sep"></div>
</dl>
<div class="sep"></div>
</dd>
</dl>
</section>
</div>
</div>
</div>
<!-- Search script and dependencies -->
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = 'search.html#' + encodeURIComponent(query);
window.location.href = url;
};
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>